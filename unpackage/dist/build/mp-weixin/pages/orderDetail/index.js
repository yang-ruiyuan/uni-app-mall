(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/orderDetail/index"],{"453c":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.showPay=!0},e.e1=function(t){e.showPay=!1})},o=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o})},"49ef":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("6f4a"),o=n("2f62");function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){i(e,t,n[t])})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=function(){return Promise.all([n.e("common/vendor"),n.e("components/payList")]).then(n.bind(null,"08ed"))},c={name:"orderDetail",components:{PayList:r},data:function(){return{Info:{},tag:1,totleMoney:0,params:{batchcode:"",user_id:""},same:{},showPay:!1}},onLoad:function(e){this.params.batchcode=e.batchcode,this.params.user_id=this.userInfo.id,this.same.ticket=this.userInfo.ticket,this.same.uname=this.userInfo.uname,this.same.user_id=this.userInfo.id,this.tag=+e.tag,2===+e.tag?this.getBagInfo():this.getInfo()},methods:{getInfo:function(){var t=this;e.showLoading(),(0,a.orderDetail)(this.params).then(function(n){if(e.hideLoading(),n.data.length){for(var a=n.data[0],o=0;o<a.shop_orders.length;o++)a.shop_orders[o].now_price=a.shop_orders[o].totalprice/a.shop_orders[o].rcount;if(0==a.status&&0==a.paystatus){var s=new Date,i=Date.parse(a.shop_orders[0].recovery_time);s.getTime()-i>0&&(a.status=-2)}var r=a.CouponPrice+parseInt(a.decrease_money),c=parseInt(a.totalprice);a.totalprice=c,a.totalprice1=a.totalprice+a.sendMoney,t.totleMoney=r,t.Info=a}})},goEvalate:function(){e.navigateTo({url:"/pages/comment/index?batchcode=".concat(this.Info.batchcode,"&tag=").concat(this.tag)})},getBagInfo:function(){var t=this;e.showLoading(),(0,a.BagOrderDetail)(this.params).then(function(n){if(e.hideLoading(),!n.data.code){var a=n.data.data[0],o={};o.CouponPrice=a.totalprice,o.send_express_name=a.expressname,o.address=a.location_p+a.location_c+a.location_a+a.address,o.aftersale_type=0,o.batchcode=a.batchcode,o.createtime=a.createtime,o.confirm_sendtime=a.confirm_sendtime,o.decrease_money=0,o.deductible_money=0,o.expressnum=a.expressnum,o.id=a.p_id,o.is_discuss=0,o.pay_currency=0,o.pay_money=a.package_price,o.paystatus=a.paystatus,o.phone=a.phone,o.pid=a.p_id,o.pname=a.package_name,o.rcount=a.rcount,o.return_status=a.return_status,o.sendMoney=0,o.sendstatus=a.sendstatus,o.shop_orders=[{default_imgurl:a.default_head_imgurl,pname:a.package_name,rcount:a.rcount,now_price:a.package_price}],o.status=0,o.totalprice=a.totalprice,o.user_name="",t.Info=o}})},shopRemind:function(t){e.showLoading();var n=Object.assign({},this.same,{batchcode:t});(0,a.orderRemind)(n).then(function(t){e.hideLoading(),4e5===t.data.code&&e.showModal({title:"",content:t.data.message,showCancel:!1})})},cOrder:function(t){var n=this,o=Object.assign({},this.same,{batchcode:t});e.showModal({title:"",content:"确认取消该订单吗?",success:function(t){var s;t.confirm&&(e.showLoading(),s=2===n.tag?a.BagConcel:a.CancelOrder,s(o).then(function(t){e.hideLoading(),n.Info.status=-1,4e5===t.data.code&&e.showToast({title:t.data.message})}))}})},conOrder:function(t){var n=this;e.showModal({title:"",content:"你确认收货吗？",success:function(t){if(t.confirm){var o;n.userInfo.ticket,n.userInfo.uname;e.showLoading(),o=2===n.tag?a.BagConfirm:a.confirmOrder,o(Object.assign({},n.params,n.same)).then(function(t){e.hideLoading(),4e5!==t.code&&t.data.status?e.showModal({title:"",content:"收货失败",showCancel:!1}):e.showModal({title:"",content:"收货成功",showCancel:!1,success:function(t){t.confirm&&e.navigateBack()}})})}}})},waybillDetail:function(){e.navigateTo({url:"/packageB/pages/waybill/waybill?send_express_name="+this.Info.send_express_name+"&expressnum="+this.Info.expressnum})},Refund:function(){e.navigateTo({url:"/packageB/pages/refund/index?batchcode="+this.Info.batchcode+"&tag="+this.tag})}},computed:s({},(0,o.mapState)(["userInfo"]))};t.default=c}).call(this,n("543d")["default"])},"4f59":function(e,t,n){},"61f6":function(e,t,n){"use strict";n.r(t);var a=n("453c"),o=n("ae6e");for(var s in o)"default"!==s&&function(e){n.d(t,e,function(){return o[e]})}(s);n("b26b");var i=n("2877"),r=Object(i["a"])(o["default"],a["a"],a["b"],!1,null,null,null);t["default"]=r.exports},"710d":function(e,t,n){"use strict";(function(e){n("ad72"),n("921b");a(n("66fd"));var t=a(n("61f6"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},ae6e:function(e,t,n){"use strict";n.r(t);var a=n("49ef"),o=n.n(a);for(var s in a)"default"!==s&&function(e){n.d(t,e,function(){return a[e]})}(s);t["default"]=o.a},b26b:function(e,t,n){"use strict";var a=n("4f59"),o=n.n(a);o.a}},[["710d","common/runtime","common/vendor"]]]);